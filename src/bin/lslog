#!/usr/bin/env bash
# OLS command: lslog


set -euo pipefail
IFS=$'\n\t'

LOG_FILE="$HOME/OLS/logs.log"

# ===== Help =====
show_help() {
	cat <<'EOF'
lslog - View OLS activity logs

usage:
    lslog              Display all log entries
    lslog --help       Show this help message

description:
    Prints the contents of the OLS log file (~/OLS/logs.log).
    Each log entry includes a timestamp, component name, and message.
    Pipe the output to filter, sort, or search log entries.

examples:
    lslog                    show all logs
    lslog | grep EE          show only errors
    lslog | grep gx          show only gx command logs
    lslog | tail -20         show the last 20 log entries
    lslog | sort | uniq      show unique log entries
EOF
}

# ===== Args =====
case "${1-}" in
    --help)
        show_help
        exit 0
        ;;
    -G|--global)
        if command -v journalctl >/dev/null 2>&1; then
            journalctl -k
        else
            dmesg
        fi
        ;;
    *)
    cat "$LOG_FILE"
esac


