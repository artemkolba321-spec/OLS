#!/usr/bin/env bash
# OLS command: setmod

set -euo pipefail
IFS=$'\n\t'

# ===== Paths =====
OLS_DIR="$HOME/OLS"
BIN_DIR="$OLS_DIR/bin"
LOG_FILE="$OLS_DIR/logs.log"

# ===== Logging =====
ols_log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') [OLS][setmod] $@" >> "$LOG_FILE"
}

die() {
    echo "setmod: $@" >&2
    ols_log "EE: $@"
    exit 1
}

# ===== Helpers =====
show_help() {
    cat <<'EOF'
setmod

usage:
    setmod -m <access rights> <file>
    setmod -u <user>
EOF
}

case "$1" in
    --help)
        show_help
        ;;
    -m)
        chmod "$2" "$3"
        ;;
    -u)
        chown "$2":"$2" "$3"
        ;;
esac